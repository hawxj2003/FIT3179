{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {"url": "https://raw.githubusercontent.com/xying0613/testing/main/complete.json"},
    "title":{"text":"Interactive Scatterplot Visualising Countries and Prevalence of Overweight and Obesity Adults", "fontSize":20},
    "width": 800,
    "height": 500,    
    "layer": [
      {
        "encoding": {
          "x": {
            "field": "Both(Obesity)",
            "type": "quantitative",
            "axis": {"tickCount": 5, "title": "Obesity Prevalence", "titleFontSize":15}
          },
          "y": {
            "field": "Both(Overweight)",
            "type": "quantitative",
            "axis": {"tickCount": 5, "title": "Overweight Prevalence", "titleFontSize":15}
          }
        },
        
        "layer": [
          {"params": [
              {
                "name": "year_select",
                "value": [{"Year": 1990}],
                "select": {
                  "type": "point",
                  "fields": ["Year"]
                },
                "bind": {
                  "name": "Year: ",
                  "input": "range",
                  "min": 1990, "max": 2022, "step": 1
                }
              },
              {
                "name": "hovered",
                "select": {
                  "type": "point",
                  "fields": ["Entity"],
                  "toggle": false,
                  "on": "mouseover"
                }
              },
              {
                "name": "clicked",
                "select": {"type": "point", "fields": ["Entity"]}
              }
            ],
  
            "transform": [
              {"filter": {"param": "year_select"}}
              ],
            
            "mark": {
              "type": "circle", 
              "size": 100
            },
            "encoding": {
              "fillOpacity": {
                "condition": {"param": "clicked", "value": 1},
                "value": 0.3
              },
              "color": {
                "field": "WHO region",
                "title": "Region",
                "scale": {
                  "range":["#4c78a8","#f781bf","#eeca3b","#54a24b","#d62728","#6a3d9a"]
                }
              },
              "tooltip":[
                {"field":"Both(Overweight)","type": "quantitative", "title":"Overweight Prevalence"},
                {"field":"Both(Obesity)","type": "quantitative", "title":"Obesity Prevalence"}
                ]
            }
          },
  
          {
            "transform": [{"filter":{"param": "year_select"}}],
            "mark":{
              "type":"text",
              "yOffset": -12,
              "fontSize": 12},
            "encoding": {
              "text":{"field":"Entity"},
              "opacity":{
                "condition":{
                  "test":"datum.Entity=='Malaysia'", "value":1},"value":0
                  }
            }
          }
        ]
      }
    ]
  }
  